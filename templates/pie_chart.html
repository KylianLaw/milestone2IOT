{% extends "base.html" %}
{% block title %}Pie Chart - IoT Dashboard{% endblock %}
{% block content %}
  <h2>Device Status Distribution</h2>

<div class="chart-sm">
  <canvas id="pieChart"></canvas>
</div>

  <script>
    fetch('/api/pie-data')
      .then(r => r.json())
      .then(data => {
        const ctx = document.getElementById('pieChart').getContext('2d');
        new Chart(ctx, {
          type: 'pie',
          data,
          options: {
            responsive: true,
            plugins: {
              legend: { display: true, position: 'top' },
              title: { display: true, text: 'IoT Device Status Overview' }
            }
          }
        });
      });
  </script>
{% endblock %}
